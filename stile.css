@font-face {
  font-family: 'Kirome';
  src: url('./fonts/Kirome/Kirome.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

:root {
  --color-primary: #070898;
  --color-primary2: #285FF4;
  --color-secondary: #980807;
  --color-secondary2: #F6C500;
  --color-hover: #079808;
  --mobile-padding: 5vw;
  --loading-progress: 0%; /* Variable for the loading bar */
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  height: 100%;
  font-family: sans-serif;
  overflow: hidden;
}

/* Preloader Styles */
#preloader {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #ffffff; /* White background */
  z-index: 9999;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: opacity 1.5s ease-out, visibility 1.5s ease-out; /* Fade-out transition */
}

.preloader-content {
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 25px;
  opacity: 0;
  transition: opacity 0.4s ease-in;
}

.preloader-content.ready {
  opacity: 1;
}

.loader-icon {
  width: 150px; /* Adjust size as needed */
  height: 150px;
  animation: spin 2s linear infinite; /* The spinning animation */
}

#preloader p {
  font-family: 'Kirome', sans-serif;
  font-size: 1.5rem;
  color: var(--color-primary);
  max-width: 1200px;
  line-height: 1.5;
}

/* Loading Bar Styles */
.loading-bar-container {
  width: 250px;
  height: 10px;
  background-color: var(--color-primary);
  border-radius: 5px;
  overflow: hidden;
}

.loading-bar-fill {
  width: 0%; /* Start at 0% */
  height: 100%;
  background-color: var(--color-hover);
  border-radius: 5px;

  /* The multi-part animation. It runs as soon as the page loads. */
  animation: loading-progress-animation 5s ease-in-out forwards;
}

@keyframes loading-progress-animation {
  0% {
    width: 0%; /* Start at 0% */
  }
  25% {
    width: 37%; /* Phase 1: Quickly jump to 37% in the first ~1.25s */
  }
  90% {
    width: 77%; /* Phase 2: Slowly crawl from 65% to 85% for the next ~3.25s */
  }
  100% {
    width: 96%; /* Phase 3: Sit at 90% for the final 0.5s */
  }
}

/* When JS adds .loading-finished to the body, this forces the bar to 100% */
body.loading-finished .loading-bar-fill {
  animation: none; /* Stop the old animation */
  width: 100%;
  transition: width 0.5s ease-in-out; /* Animate the final fill smoothly */
}


/* Keyframe animation for the rotation */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Class to trigger the fade-out */
#preloader.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

/* Initially hide the main content until preloader is done */
.page-header, .container {
  visibility: hidden;
  opacity: 0;
  transition: opacity 1s ease-in; /* Optional: fade in the main content */
}

/* Class to show the main content */
.page-header.visible, .container.visible {
  visibility: visible;
  opacity: 1;
}

/* Header */
.page-header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 2rem;
  background: white;
  z-index: 1000;
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  padding-left: 2rem;
  padding-right: 2rem;
}

.header-left {
  font-family: 'Kirome', sans-serif;
  font-size: 1rem;
  font-weight: normal;
  color: var(--color-primary);
}

.header-right,
.about-toggle {
  font-family: 'Kirome', sans-serif;
  font-size: 1rem;
  font-weight: normal;
  color: var(--color-primary);
}

.about-toggle {
    cursor: pointer;
    transition: color 0.3s ease;
}

.about-toggle:hover {
  color: var(--color-hover);
}

/* Overlay */
.about-overlay {
    position: fixed;
    inset: 0;
    background: rgba(255, 255, 255, 0.3); /* semitrasparente */
    backdrop-filter: blur(8px); /* sfocatura */
    -webkit-backdrop-filter: blur(8px); /* Safari support */
    z-index: 1001;
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    transition: opacity 1s ease, visibility 0s linear 1s, pointer-events 0s linear 1s;
}

.about-background {
    position: absolute;
    inset: 0;
}

/* New container that anchors image + webcam together */
.about-card {
  position: absolute;
  top: 2.5rem;
  left: 50%;
  transform: translateX(-50%);
  width: calc(50vw - 2.5rem);
  max-width: 750px;
  z-index: 1002;                    /* above the background overlay */
}

.about-image {
    display: block;
    width: 100%; /* dimensione gestibile */
    height: auto;
    border-radius: 0px;
    /*border: 6px solid var(--color-primary);*/
    overflow: hidden;
}

.webcam-container {
  position: absolute;
  /* Use % so it scales as the image resizes */
  top: 49.7%;     /* tweak to align the webcam with the “screen” in your image */
  left: 43.8%;    /* tweak as needed */
  width: 12.2%; /* 91.5px / 750px ≈ 12.2% of the card’s width */
  aspect-ratio: 91.5 / 55; /* preserves the same shape as before */
  transform: rotate(2.5deg);
  overflow: hidden;
  border-radius: 2px;
  z-index: 1003;
}

#webcam {
  width: 100%;
  height: 100%;
  object-fit: cover;
  }

#about-toggle:checked ~ .about-overlay {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transition: opacity 1s ease, visibility 0s linear 0s, pointer-events 0s linear 0s;
}

/* Galleria */
.container {
  display: flex;
  gap: 1rem;
  padding: 2.5rem 2rem 0 2rem;
  min-height: calc(100vh - 2rem);
}

.column {
  flex: 1;
  overflow-y: scroll;
  height: calc(100vh - 2rem);
  padding-bottom: 0.5rem;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.column::-webkit-scrollbar {
  display: none;
}

.media-link {
  display: block;
  margin-bottom: 1rem;
}

.media-link img {
  width: 100%;
  height: auto;
  object-fit: cover;
  display: block;
}

.media-link video {
    width: 100%;
    height: auto;
    object-fit: cover;
    display: block;
}

/* Impedisce lo scroll sotto l’overlay */
body.overlay-active {
  overflow: hidden !important;
  height: 100vh !important;
  touch-action: none !important;
  position: fixed !important;
  width: 100%;
}

/* Responsive */
@media (max-width: 768px) {
  html, body {
    overflow: auto;
  }

  .container {
    flex-direction: column;
    height: auto;
    padding: 2rem var(--mobile-padding);
  }

  .column {
    width: 100%;
    height: auto;
    overflow: visible;
    padding-bottom: 0;
  }

  .page-header {
    padding-left: var(--mobile-padding);
    padding-right: var(--mobile-padding);
  }

  /* Overlay mobile layout */
  .about-card {
    position: absolute;
    top: 3.5vh; /* immagine nella parte alta */
    left: 50%;
    transform: translateX(-50%);
    width: 90vw;
    max-width: 500px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* Immagine centrata e scalabile */
  .about-image {
    display: block;
    width: 100%;
    height: auto;
    border: 4px solid var(--color-primary);
  }

  /* Webcam mantiene proporzioni e posizione rispetto all’immagine */
  .webcam-container {
    position: absolute;
    top: 49.7%;
    left: 43.8%;
    width: 12.2%;
    aspect-ratio: 91.5 / 55;
    transform: rotate(2.5deg);
    overflow: hidden;
    border-radius: 2px;
    z-index: 1003;
  }

  #webcam {
    width: 100%;
    height: 100%;
    object-fit: cover;
    image-rendering: pixelated !important;
  }

  .about-body-box {
    display: none;
  }
}
